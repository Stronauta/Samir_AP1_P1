@page "/C_Aportes"
@inject AportesBLL aportesbll
@using Samir_AP1_P1.Models;

<div class="card-header">
	<h3>Consultas de Reportes</h3>
</div>

<div class="row">
	<div class="col-md-3">
		<label >Desde:</label>
		<input class="form-control" type="date" @bind="Desde" />
	</div>

	<div class="col-md-3">
		<label >Hasta:</label>
		<input class="form-control" type="date" @bind="Hasta" />
	</div>
</div>

<div>
	<br />
	<label>Campos para Consultar</label>
	<div class="btn-group">
		<button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
			<i class="oi oi-magnifying-glass"></i> Filtrar
		</button>
		<div class="dropdown-menu">
			<NavLink class="dropdown-item" href="ConsultaPersona">Persona</NavLink>
			<NavLink class="dropdown-item" href="ConsultaAporteID">AporteID</NavLink>
		</div>
	</div>
</div>
<br />


<div>
<table class="table table-bordered table-striped">
		<thead>
			<tr>
				<th>ID</th>
				<th>Fecha</th>
				<th>Persona</th>
				<th>Descripcion</th>
				<th>Monto</th>
			</tr>
		</thead>
		<tbody>
			@foreach (var item in Aportes)
			{
				<tr>
					<td>@item.AporteID</td>
					<td>@item.Fecha</td>
					<td>@item.Persona</td>
					<td>@item.Descripcion</td>
					<td>@item.Monto</td>
				</tr>
			}
		</tbody>
	</table>
</div>


@code {

	public List<Aportes> Aportes  = new List<Aportes>();

	[Parameter]
	public int AporteID { get; set; }

	public DateTime Hasta { get; set; }
	public DateTime Desde { get; set; }

	protected override void OnInitialized()
	{
		Aportes = aportesbll.GetList(i => true && i.Fecha >= Desde.Date && i.Fecha <= Hasta);
		Hasta = DateTime.Now.AddMonths(-1);
		Desde = DateTime.Now;
	}

	public void Buscar()
	{
		var NotiBuscar = new NotificationMessage
			{
				Severity = NotificationSeverity.Info,
				Summary = "Buscado",
				Detail = "Registro Encontrado",
				Duration = 4_000
			};
		Aportes = aportesbll.GetList(i => true && i.Fecha >= Desde.Date && i.Fecha <= Hasta);
	}
}
